<?xml version="1.0" encoding="UTF-8"?>
<!-- 这是用来单元测试 XML 模版或标签生成的 SQL 的数据库操作运行时的 Fenix XML 仓库. -->
<fenixs namespace="UnitTestRepository">

    <fenix id="sqlHeader">
        SELECT u FROM User AS u
        WHERE
    </fenix>

    <!-- 测试 equal 相关标签的查询. -->
    <fenix id="testEqual">
        <import fenixId="sqlHeader"/>
        <equal field="u.id" value="user.id"/>
        <orEqual field="u.id" value="userId" match="userId != empty"/>
    </fenix>

    <!-- 测试 notEqual 相关标签的查询. -->
    <fenix id="testNotEqual">
        SELECT u FROM User AS u
        WHERE
        <greaterThan field="u.age" value="user.age"/>
        <andEqual field="u.status" value="user.status" match="user.status != empty"/>
        <andNotEqual field="u.name" value="user.name"/>
    </fenix>

    <!-- 测试 lessThan 相关标签的查询. -->
    <fenix id="testLessThanEqual">
        SELECT u FROM User AS u
        WHERE
        <notEqual field="u.id" value="user.id"/>
        <andLessThanEqual field="u.age" value="user.age" match="user.age != empty"/>
    </fenix>

    <!-- 测试 like 相关标签的查询. -->
    <fenix id="testLike">
        SELECT u FROM User AS u
        WHERE
        <greaterThanEqual field="u.age" value="user.age"/>
        <andLike field="u.name" value="user.name" match="user.name != empty"/>
        <andNotLike field="u.sex" value="user.sex" match="user.sex != empty"/>
    </fenix>

    <!-- 测试 startsWith 相关标签的查询. -->
    <fenix id="testStartsWith">
        SELECT u FROM User AS u
        WHERE
        <startsWith field="u.name" value="user.name" match="user.name != empty"/>
        <andNotStartsWith field="u.sex" value="user.sex" match="user.sex != empty"/>
    </fenix>

    <!-- 测试 endsWith 相关标签的查询. -->
    <fenix id="testEndsWith">
        <import fenixId="sqlHeader"/>
        <endsWith field="u.email" value="user.email" match="user.email != empty"/>
        <andNotEndsWith field="u.name" value="user.name" match="user.name != empty"/>
    </fenix>

    <!-- 测试 between 相关标签的查询. -->
    <fenix id="testBetween">
        SELECT u FROM User AS u
        WHERE
        <between field="u.age" start="user.startAge" end="user.endAge" match="(?user.startAge != empty) || (?user.endAge != empty)"/>
        <andBetween field="u.birthday" start="user.startBirthday" end="user.?endBirthday"
                 match="(?user.startBirthday != empty) || (?user.endBirthday != empty)"/>
    </fenix>

    <!-- 测试 in 相关标签的查询. -->
    <fenix id="testIn">
        SELECT u FROM User AS u
        WHERE
        <in field="u.id" value="userMap.ids"/>
        <andIn field="u.name" value="userMap.names" match="userMap.?names != empty"/>
        <andNotIn field="u.sex" value="userMap.sexs" match="userMap.?sexs != empty"/>
    </fenix>

    <!-- 测试 isNull 相关标签的查询. -->
    <fenix id="testIsNull">
        SELECT u FROM User AS u
        WHERE
        <isNull field="u.createTime"/>
        <andIsNotNull field="u.updateTime" match="user.id != empty"/>
    </fenix>

    <!-- 测试 text 相关标签的查询. -->
    <fenix id="testText">
        SELECT u FROM User AS u
        WHERE
        <text value="['userId': userMap.ids]">
            u.id IN :userId
        </text>
    </fenix>

</fenixs>
